<Window x:Class="HotAlert.Views.SettingsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:converters="clr-namespace:HotAlert.Converters"
        xmlns:vm="clr-namespace:HotAlert.ViewModels"
        xmlns:helpers="clr-namespace:HotAlert.Helpers"
        Title="{helpers:Loc SettingsWindowTitle}"
        Width="450" Height="700"
        WindowStartupLocation="CenterScreen"
        ResizeMode="NoResize"
        ShowInTaskbar="True"
        d:DataContext="{d:DesignInstance Type=vm:SettingsViewModel}"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d">

    <Window.Resources>
        <converters:ColorToBrushConverter x:Key="ColorToBrushConverter"/>

        <!-- 分组标题样式 -->
        <Style x:Key="GroupHeaderStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Margin" Value="0,0,0,10"/>
            <Setter Property="Foreground" Value="#333"/>
        </Style>

        <!-- 标签样式 -->
        <Style x:Key="LabelStyle" TargetType="TextBlock">
            <Setter Property="VerticalAlignment" Value="Center"/>
            <Setter Property="Margin" Value="0,0,10,0"/>
        </Style>

        <!-- 颜色块样式 -->
        <Style x:Key="ColorBlockStyle" TargetType="Border">
            <Setter Property="Width" Value="28"/>
            <Setter Property="Height" Value="28"/>
            <Setter Property="Margin" Value="3"/>
            <Setter Property="CornerRadius" Value="4"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="BorderThickness" Value="2"/>
            <Setter Property="BorderBrush" Value="Transparent"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="BorderBrush" Value="#666"/>
                </Trigger>
            </Style.Triggers>
        </Style>
    </Window.Resources>

    <Grid Margin="20">
        <ScrollViewer VerticalScrollBarVisibility="Auto">
            <StackPanel>
                <!-- 阈值设置 -->
                <Border BorderBrush="#E0E0E0" BorderThickness="0,0,0,1" Padding="0,0,0,15" Margin="0,0,0,15">
                    <StackPanel>
                        <TextBlock Text="{helpers:Loc GroupThreshold}" Style="{StaticResource GroupHeaderStyle}"/>

                        <!-- CPU 阈值 -->
                        <Grid Margin="0,0,0,10">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="100"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="50"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Grid.Column="0" Text="{helpers:Loc LabelCpuThreshold}" Style="{StaticResource LabelStyle}"/>
                            <Slider Grid.Column="1"
                                    Value="{Binding CpuThreshold}"
                                    Minimum="10" Maximum="100"
                                    TickFrequency="5" IsSnapToTickEnabled="True"
                                    VerticalAlignment="Center"/>
                            <TextBlock Grid.Column="2"
                                       Text="{Binding CpuThreshold, StringFormat={}{0}%}"
                                       VerticalAlignment="Center" HorizontalAlignment="Right"/>
                        </Grid>

                        <!-- 内存阈值 -->
                        <Grid Margin="0,0,0,10">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="100"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="50"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Grid.Column="0" Text="{helpers:Loc LabelMemoryThreshold}" Style="{StaticResource LabelStyle}"/>
                            <Slider Grid.Column="1"
                                    Value="{Binding MemoryThreshold}"
                                    Minimum="10" Maximum="100"
                                    TickFrequency="5" IsSnapToTickEnabled="True"
                                    VerticalAlignment="Center"/>
                            <TextBlock Grid.Column="2"
                                       Text="{Binding MemoryThreshold, StringFormat={}{0}%}"
                                       VerticalAlignment="Center" HorizontalAlignment="Right"/>
                        </Grid>

                        <!-- CPU 温度阈值 -->
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="100"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="50"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Grid.Column="0" Text="{helpers:Loc LabelCpuTemperatureThreshold}" Style="{StaticResource LabelStyle}"/>
                            <Slider Grid.Column="1"
                                    Value="{Binding CpuTemperatureThreshold}"
                                    Minimum="60" Maximum="100"
                                    TickFrequency="5" IsSnapToTickEnabled="True"
                                    VerticalAlignment="Center"/>
                            <TextBlock Grid.Column="2"
                                       Text="{Binding CpuTemperatureThreshold, StringFormat={}{0}°C}"
                                       VerticalAlignment="Center" HorizontalAlignment="Right"/>
                        </Grid>
                    </StackPanel>
                </Border>

                <!-- 边框设置 -->
                <Border BorderBrush="#E0E0E0" BorderThickness="0,0,0,1" Padding="0,0,0,15" Margin="0,0,0,15">
                    <StackPanel>
                        <TextBlock Text="{helpers:Loc GroupBorder}" Style="{StaticResource GroupHeaderStyle}"/>

                        <!-- 最小宽度 -->
                        <Grid Margin="0,0,0,10">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="100"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="50"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Grid.Column="0" Text="{helpers:Loc LabelMinWidth}" Style="{StaticResource LabelStyle}"/>
                            <Slider Grid.Column="1"
                                    Value="{Binding BorderMinWidth}"
                                    Minimum="5" Maximum="30"
                                    TickFrequency="1" IsSnapToTickEnabled="True"
                                    VerticalAlignment="Center"/>
                            <TextBlock Grid.Column="2"
                                       Text="{Binding BorderMinWidth, StringFormat={}{0}px}"
                                       VerticalAlignment="Center" HorizontalAlignment="Right"/>
                        </Grid>

                        <!-- 最大宽度 -->
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="100"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="50"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Grid.Column="0" Text="{helpers:Loc LabelMaxWidth}" Style="{StaticResource LabelStyle}"/>
                            <Slider Grid.Column="1"
                                    Value="{Binding BorderMaxWidth}"
                                    Minimum="20" Maximum="100"
                                    TickFrequency="5" IsSnapToTickEnabled="True"
                                    VerticalAlignment="Center"/>
                            <TextBlock Grid.Column="2"
                                       Text="{Binding BorderMaxWidth, StringFormat={}{0}px}"
                                       VerticalAlignment="Center" HorizontalAlignment="Right"/>
                        </Grid>
                    </StackPanel>
                </Border>

                <!-- 颜色设置 -->
                <Border BorderBrush="#E0E0E0" BorderThickness="0,0,0,1" Padding="0,0,0,15" Margin="0,0,0,15">
                    <StackPanel>
                        <TextBlock Text="{helpers:Loc GroupColor}" Style="{StaticResource GroupHeaderStyle}"/>

                        <!-- CPU 颜色 -->
                        <StackPanel Margin="0,0,0,15">
                            <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                                <TextBlock Text="{helpers:Loc LabelCpuColor}" Style="{StaticResource LabelStyle}"/>
                                <Border Width="24" Height="24" CornerRadius="4"
                                        Background="{Binding CpuColor, Converter={StaticResource ColorToBrushConverter}}"
                                        BorderBrush="#CCC" BorderThickness="1"/>
                            </StackPanel>
                            <ItemsControl ItemsSource="{Binding PresetColors}">
                                <ItemsControl.ItemsPanel>
                                    <ItemsPanelTemplate>
                                        <WrapPanel/>
                                    </ItemsPanelTemplate>
                                </ItemsControl.ItemsPanel>
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <Border Style="{StaticResource ColorBlockStyle}"
                                                Background="{Binding Converter={StaticResource ColorToBrushConverter}}">
                                            <Border.InputBindings>
                                                <MouseBinding MouseAction="LeftClick"
                                                              Command="{Binding DataContext.SelectCpuColorCommand, RelativeSource={RelativeSource AncestorType=Window}}"
                                                              CommandParameter="{Binding}"/>
                                            </Border.InputBindings>
                                        </Border>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                        </StackPanel>

                        <!-- 内存颜色 -->
                        <StackPanel Margin="0,0,0,15">
                            <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                                <TextBlock Text="{helpers:Loc LabelMemoryColor}" Style="{StaticResource LabelStyle}"/>
                                <Border Width="24" Height="24" CornerRadius="4"
                                        Background="{Binding MemoryColor, Converter={StaticResource ColorToBrushConverter}}"
                                        BorderBrush="#CCC" BorderThickness="1"/>
                            </StackPanel>
                            <ItemsControl ItemsSource="{Binding PresetColors}">
                                <ItemsControl.ItemsPanel>
                                    <ItemsPanelTemplate>
                                        <WrapPanel/>
                                    </ItemsPanelTemplate>
                                </ItemsControl.ItemsPanel>
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <Border Style="{StaticResource ColorBlockStyle}"
                                                Background="{Binding Converter={StaticResource ColorToBrushConverter}}">
                                            <Border.InputBindings>
                                                <MouseBinding MouseAction="LeftClick"
                                                              Command="{Binding DataContext.SelectMemoryColorCommand, RelativeSource={RelativeSource AncestorType=Window}}"
                                                              CommandParameter="{Binding}"/>
                                            </Border.InputBindings>
                                        </Border>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                        </StackPanel>

                        <!-- CPU 温度颜色 -->
                        <StackPanel>
                            <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                                <TextBlock Text="{helpers:Loc LabelCpuTemperatureColor}" Style="{StaticResource LabelStyle}"/>
                                <Border Width="24" Height="24" CornerRadius="4"
                                        Background="{Binding CpuTemperatureColor, Converter={StaticResource ColorToBrushConverter}}"
                                        BorderBrush="#CCC" BorderThickness="1"/>
                            </StackPanel>
                            <ItemsControl ItemsSource="{Binding PresetColors}">
                                <ItemsControl.ItemsPanel>
                                    <ItemsPanelTemplate>
                                        <WrapPanel/>
                                    </ItemsPanelTemplate>
                                </ItemsControl.ItemsPanel>
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <Border Style="{StaticResource ColorBlockStyle}"
                                                Background="{Binding Converter={StaticResource ColorToBrushConverter}}">
                                            <Border.InputBindings>
                                                <MouseBinding MouseAction="LeftClick"
                                                              Command="{Binding DataContext.SelectTemperatureColorCommand, RelativeSource={RelativeSource AncestorType=Window}}"
                                                              CommandParameter="{Binding}"/>
                                            </Border.InputBindings>
                                        </Border>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                        </StackPanel>
                    </StackPanel>
                </Border>

                <!-- 动画设置 -->
                <Border BorderBrush="#E0E0E0" BorderThickness="0,0,0,1" Padding="0,0,0,15" Margin="0,0,0,15">
                    <StackPanel>
                        <TextBlock Text="{helpers:Loc GroupAnimation}" Style="{StaticResource GroupHeaderStyle}"/>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="100"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Grid.Column="0" Text="{helpers:Loc LabelBreathSpeed}" Style="{StaticResource LabelStyle}"/>
                            <ComboBox Grid.Column="1"
                                      ItemsSource="{Binding BreathSpeedOptions}"
                                      SelectedValue="{Binding BreathSpeed}"
                                      SelectedValuePath="Value"
                                      DisplayMemberPath="DisplayName"
                                      Width="120" HorizontalAlignment="Left"/>
                        </Grid>
                    </StackPanel>
                </Border>

                <!-- 系统设置 -->
                <Border BorderBrush="#E0E0E0" BorderThickness="0,0,0,1" Padding="0,0,0,15" Margin="0,0,0,15">
                    <StackPanel>
                        <TextBlock Text="{helpers:Loc GroupSystem}" Style="{StaticResource GroupHeaderStyle}"/>
                        <CheckBox Content="{helpers:Loc CheckBoxAutoStart}"
                                  IsChecked="{Binding AutoStart}"
                                  VerticalContentAlignment="Center"/>
                    </StackPanel>
                </Border>

                <!-- 语言设置 -->
                <Border BorderBrush="#E0E0E0" BorderThickness="0,0,0,1" Padding="0,0,0,15" Margin="0,0,0,15">
                    <StackPanel>
                        <TextBlock Text="{helpers:Loc GroupLanguage}" Style="{StaticResource GroupHeaderStyle}"/>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="100"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Grid.Column="0" Text="{helpers:Loc LabelLanguage}" Style="{StaticResource LabelStyle}"/>
                            <ComboBox Grid.Column="1"
                                      ItemsSource="{Binding LanguageOptions}"
                                      SelectedValue="{Binding Language}"
                                      SelectedValuePath="Value"
                                      DisplayMemberPath="DisplayName"
                                      Width="120" HorizontalAlignment="Left"/>
                        </Grid>
                    </StackPanel>
                </Border>

                <!-- 底部操作 -->
                <Button Content="{helpers:Loc ButtonReset}"
                        Command="{Binding ResetCommand}"
                        HorizontalAlignment="Left"
                        Padding="15,8"/>
            </StackPanel>
        </ScrollViewer>
    </Grid>
</Window>
