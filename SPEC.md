# HotAlert - 系统资源监控警告工具

## 概述

HotAlert 是一款 Windows 桌面 CPU/内存使用率监控工具。当资源使用率超过预设阈值时，在屏幕四周显示醒目的彩色边框警告，类似导航软件的超速提醒效果。

## 技术栈

- **框架**: C# WPF (.NET 6+)
- **目标平台**: Windows 10/11
- **UI风格**: Windows 原生风格，跟随系统主题

## 核心功能

### 1. 资源监控

| 项目 | 规格 |
|------|------|
| 监控指标 | CPU 使用率、内存使用率 |
| 采样间隔 | 3 秒 |
| 阈值配置 | CPU 和内存分开配置 |
| 默认阈值 | 80% |

### 2. 警告边框

#### 2.1 显示位置
- 屏幕四边同时显示边框（上、下、左、右）
- **多显示器**: 所有显示器同时显示警告边框
- **全屏应用**: 照常显示，覆盖在全屏应用之上（Topmost）

#### 2.2 边框样式
- 边框为渐变效果（从边缘向内渐变透明）
- **动态宽度**: 超过阈值越多，边框越宽
  - 宽度范围用户可配置（如 10px ~ 50px）
  - 计算公式: `宽度 = 最小宽度 + (当前值 - 阈值) / (100 - 阈值) × (最大宽度 - 最小宽度)`
- **动画效果**: 微弱呼吸灯效果（轻微亮度变化循环）

#### 2.3 颜色方案
- **CPU 警告**: 红色（默认 #FF4444）
- **内存警告**: 橙色（默认 #FF8C00）
- 用户可在设置中自定义颜色
- CPU 和内存同时超阈值时，两种颜色边框同时显示

#### 2.4 数值显示
- 鼠标悬浮在边框上时，显示具体数值（如 "CPU 95%"）
- 悬浮提示跟随鼠标位置

#### 2.5 关闭方式
- 点击系统托盘图标关闭当前警告
- 如果使用率下降到阈值以下，边框**不会**自动消失，需手动关闭
- 关闭后如果再次超过阈值，会重新触发警告

### 3. 系统托盘

- 常驻系统托盘显示图标
- 托盘图标可显示当前状态（正常/警告中）
- 右键菜单:
  - 关闭警告（仅警告状态时可用）
  - 设置
  - 语言切换
  - 开机启动（勾选项）
  - 退出

### 4. 配置界面

独立的设置窗口，包含以下配置项:

#### 阈值设置
- CPU 阈值滑块 (0-100%)
- 内存阈值滑块 (0-100%)

#### 边框设置
- 最小宽度 (像素)
- 最大宽度 (像素)
- CPU 警告颜色选择器
- 内存警告颜色选择器
- 呼吸灯速度（慢/中/快）

#### 系统设置
- 开机自启动开关（默认开启）
- 语言选择（中文/English）

## 多语言支持

- 支持中文和英文
- 界面文本使用资源文件管理
- 用户可在设置中切换语言

## 配置存储

- **位置**: `%AppData%\HotAlert\config.json`
- **格式**: JSON
- **配置项示例**:

```json
{
  "cpuThreshold": 80,
  "memoryThreshold": 80,
  "borderMinWidth": 10,
  "borderMaxWidth": 50,
  "cpuColor": "#FF4444",
  "memoryColor": "#FF8C00",
  "breathSpeed": "medium",
  "autoStart": true,
  "language": "zh-CN"
}
```

## 开机自启动

- 通过注册表实现: `HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Run`
- 默认开启
- 用户可在设置中开关

## 分发方式

### 绿色免安装版
- 单个 exe 文件 + config.json
- 可放在任意目录运行
- 首次运行自动创建配置文件

### 安装包版
- 标准 Windows 安装程序（MSI 或 NSIS）
- 创建开始菜单快捷方式
- 创建桌面快捷方式（可选）
- 支持卸载

## 性能目标

| 指标 | 目标值 |
|------|--------|
| 内存占用 | < 100 MB |
| CPU 占用 | < 1% (空闲时) |
| 启动时间 | < 2 秒 |

## 边缘情况处理

### 1. 显示器变化
- 动态检测显示器添加/移除
- 自动调整边框显示范围

### 2. DPI 缩放
- 支持高 DPI 显示器
- 边框宽度按 DPI 缩放

### 3. 系统休眠/唤醒
- 休眠时暂停监控
- 唤醒后自动恢复

### 4. 权限问题
- 不需要管理员权限运行
- 使用 PerformanceCounter 获取系统指标

## 不包含的功能

以下功能明确**不在**本项目范围内:

- ❌ 声音提示
- ❌ 历史数据记录/图表
- ❌ 网络/磁盘等其他指标监控
- ❌ 进程级别的资源监控
- ❌ 远程通知/推送

## 项目结构建议

```
HotAlert/
├── HotAlert.sln
├── src/
│   ├── HotAlert/
│   │   ├── App.xaml
│   │   ├── MainWindow.xaml          # 主窗口（托盘容器）
│   │   ├── Views/
│   │   │   ├── SettingsWindow.xaml  # 设置窗口
│   │   │   └── BorderOverlay.xaml   # 边框覆盖层窗口
│   │   ├── ViewModels/
│   │   ├── Services/
│   │   │   ├── ResourceMonitor.cs   # 资源监控服务
│   │   │   ├── AlertService.cs      # 警告管理服务
│   │   │   └── ConfigService.cs     # 配置管理服务
│   │   ├── Models/
│   │   │   └── AppConfig.cs         # 配置模型
│   │   └── Resources/
│   │       ├── Strings.zh-CN.resx   # 中文资源
│   │       └── Strings.en-US.resx   # 英文资源
│   └── HotAlert.Installer/          # 安装包项目
├── docs/
└── README.md
```

## 版本规划

### v1.0 (MVP)
- 基础资源监控
- 边框警告显示
- 系统托盘
- 基础设置界面
- 中文界面

### v1.1
- 英文支持
- 安装包

### 未来可能
- 更多自定义选项
- 主题支持
